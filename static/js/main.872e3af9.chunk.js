(this.webpackJsonpjlcparts=this.webpackJsonpjlcparts||[]).push([[0],{30:function(e,t,a){e.exports=a(46)},38:function(e,t,a){},46:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(18),c=a.n(o),s=a(14),l=a(5),i=a(6),u=a(8),p=a(7),m=a(12),f=a(27),h=a(28),d=a(29),b=(a(38),a(1)),g=a.n(b),v=a(16),y=a(19),x=a(3);function k(){return E.apply(this,arguments)}function E(){return(E=Object(x.a)(g.a.mark((function e(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,navigator.storage;case 2:if(e.t1=e.sent,!e.t1){e.next=5;break}e.t1=navigator.storage.persist;case 5:if(e.t0=e.t1,!e.t0){e.next=8;break}e.t0=navigator.storage.persist();case 8:return e.abrupt("return",e.t0);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var w=new(a(23).a)("jlcparts");function C(e){return e.id}w.version(1).stores({settings:"key",components:"lcsc, category, mfr, *indexWords",categories:"id++,[category+subcategory], subcategory, category"});function j(){return(j=Object(x.a)(g.a.mark((function e(t){var a,n,r;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k();case 2:return t({"Component index":["fetching",!1]}),e.next=5,N("".concat("data","/index.json"),"Cannot fetch categories index: ");case 5:return a=e.sent,n={},r=function(e,a){n[e]=a,t(n)},w.settings.put({key:"lastDbUpdate",value:a.created}),e.next=11,I(a.categories,function(){var e=Object(x.a)(g.a.mark((function e(t,a,n){var o,c;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r(o=t+": "+a,["Adding components 1/2",!1]),e.next=4,T(t,a,n);case 4:return c=e.sent,r(o,["Updating stock 2/2",!1]),e.next=8,R(c);case 8:return r(o,["Added",!0]),e.abrupt("return",c);case 10:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),function(){var e=Object(x.a)(g.a.mark((function e(t,a){var n,o,c,s;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.category,o=t.subcategory,r(c=n+": "+o,["Updating components 1/2",!1]),e.next=6,B(t);case 6:return e.next=8,T(n,o,a);case 8:return s=e.sent,r(c,["Updating stock 2/2",!1]),e.next=12,R(s);case 12:return r(c,["Update finished",!0]),e.abrupt("return",s);case 14:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),function(){var e=Object(x.a)(g.a.mark((function e(t,a){var n,o,c;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.category,o=t.subcategory,r(c=n+": "+o,["Updating stock 1/1",!1]),e.next=6,R(t);case 6:return r(c,["Stock updated",!0]),e.abrupt("return",t);case 8:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),function(){var e=Object(x.a)(g.a.mark((function e(t){var a,n,o;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.category,n=t.subcategory,r(o=a+": "+n,["Removing category",!1]),e.next=6,B(t);case 6:r(o,["Removed",!0]);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function O(){return(O=Object(x.a)(g.a.mark((function e(){var t,a,n;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N("".concat("data","/index.json"),"Cannot fetch categories index: ");case 2:return t=e.sent,a=!1,n=function(e){return a=!0,e},e.next=7,I(t.categories,n,n,n,n);case 7:return e.abrupt("return",a);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function N(e,t){return S.apply(this,arguments)}function S(){return(S=Object(x.a)(g.a.mark((function e(t,a){var n,r;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t);case 2:if((n=e.sent).ok){e.next=5;break}throw Error(a+n.statusText);case 5:if((r=n.headers.get("Content-Type"))&&-1!==r.indexOf("application/json")){e.next=8;break}throw Error(a+"Response is not JSON, but ".concat(r,": ")+t);case 8:return e.next=10,n.json();case 10:return e.abrupt("return",e.sent);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function P(e,t){return A.apply(this,arguments)}function A(){return(A=Object(x.a)(g.a.mark((function e(t,a){var n;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t);case 2:if((n=e.sent).ok){e.next=5;break}throw Error(a+n.statusText);case 5:return e.next=7,n.text();case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function I(e,t,a,n,r){return q.apply(this,arguments)}function q(){return(q=Object(x.a)(g.a.mark((function e(t,a,n,r,o){var c,l,i,u,p,m;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(c=[],l=new Set,i=function(){for(var e=Object(s.a)(p[u],2),t=e[0],o=e[1],i=function(){var e=Object(s.a)(f[m],2),o=e[0],i=e[1],u=w.categories.where({category:t,subcategory:o}).first(function(){var e=Object(x.a)(g.a.mark((function e(c){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==c){e.next=6;break}return e.next=3,a(t,o,i);case 3:c=e.sent,e.next=16;break;case 6:if(i.datahash===c.datahash&&i.sourcename===c.sourcename){e.next=12;break}return e.next=9,n(c,i);case 9:c=e.sent,e.next=16;break;case 12:if(i.stockhash===c.stockhash){e.next=16;break}return e.next=15,r(c);case 15:c=e.sent;case 16:c&&l.add(C(c));case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());c.push(u)},m=0,f=Object.entries(o);m<f.length;m++)i()},u=0,p=Object.entries(t);u<p.length;u++)i();return e.next=6,Promise.all(c);case 6:return e.next=8,w.categories.toArray();case 8:return m=e.sent,e.next=11,Promise.all(m.map(function(){var e=Object(x.a)(g.a.mark((function e(t){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!l.has(C(t))){e.next=2;break}return e.abrupt("return");case 2:o(t);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function D(e,t){return e.reduce((function(e,a,n){return Object(y.a)(Object(y.a)({},e),{},Object(v.a)({},a,t[n]))}),{})}function F(e,t){return U.apply(this,arguments)}function U(){return(U=Object(x.a)(g.a.mark((function e(t,a){var n,r;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.schema,r=a.components.map((function(e){var a=D(n,e);return a.category=C(t),a})),e.next=4,w.components.bulkPut(r);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function T(e,t,a){return M.apply(this,arguments)}function M(){return(M=Object(x.a)(g.a.mark((function e(t,a,n){var r,o;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N("".concat("data","/").concat(n.sourcename,".json"),"Cannot fetch components for category ".concat(t,": ").concat(a,": "));case 2:return r=e.sent,e.next=5,w.transaction("rw",w.categories,w.components,Object(x.a)(g.a.mark((function e(){var o,c;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.categories.put({category:t,subcategory:a,sourcename:n.sourcename,datahash:n.datahash,stockhash:n.stockhash});case 2:return o=e.sent,e.next=5,w.categories.get(o);case 5:return c=e.sent,e.next=8,F(c,r);case 8:return e.abrupt("return",c);case 9:case"end":return e.stop()}}),e)}))));case 5:return o=e.sent,e.abrupt("return",o);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function R(e){return L.apply(this,arguments)}function L(){return(L=Object(x.a)(g.a.mark((function e(t){var a,n;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N("".concat("data","/").concat(t.sourcename,".stock.json"),"Cannot fetch stock for category ".concat(t.category,": ").concat(t.subcategory,": "));case 2:return a=e.sent,e.next=5,w.components.where({category:t.id}).modify((function(e){e.stock=a[e.lcsc]}));case 5:return e.next=7,P("".concat("data","/").concat(t.sourcename,".stock.json.sha256"),"Cannot fetch stock hash for category ".concat(t.category,": ").concat(t.subcategory,": "));case 7:return n=e.sent,e.next=10,w.categories.update(C(t),{stockhash:n});case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function B(e){return z.apply(this,arguments)}function z(){return(z=Object(x.a)(g.a.mark((function e(t){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.transaction("rw",w.components,w.categories,Object(x.a)(g.a.mark((function e(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.components.where({category:C(t)}).delete();case 2:return e.next=4,w.categories.delete(C(t));case 4:case"end":return e.stop()}}),e)}))));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var G=a(17),W=a(9),V=a(4),H=a(13),J=a(20),Q=a(24),$=a(25);function K(e){var t,a="sticky top-0 bg-blue-500 mx-1 p-2 border-r-2 rounded ";if(e.sortable){a+="cursor-pointer";var n="sort";"asc"===e.sortDirection&&(n="sort-amount-up"),"desc"===e.sortDirection&&(n="sort-amount-down"),t=r.a.createElement(H.a,{icon:n})}else t=r.a.createElement(r.a.Fragment,null);return r.a.createElement(r.a.Fragment,null,r.a.createElement("th",{onClick:function(){return e.onClick()},className:a},e.header,t))}var X=function(e){Object(u.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).handleHeaderClick=function(e){n.state.sortBy===e?n.setState(Object(V.a)(n.state,(function(e){"asc"===e.sortDirection?e.sortDirection="desc":e.sortDirection="asc"}))):n.setState(Object(V.a)(n.state,(function(t){t.sortBy=e,t.sortDirection="asc"})))},n.getComparator=function(e){var t,a=Object(W.a)(n.props.header);try{for(a.s();!(t=a.n()).done;){var r=t.value;if(r.name===e)return r.comparator}}catch(o){a.e(o)}finally{a.f()}},n.getPropAsString=function(e){return n.props[e]?n.props[e]:""},n.rowClassName=function(){return n.getPropAsString("rowClassName")},n.evenRowClassName=function(){return n.getPropAsString("evenRowClassName")},n.oddRowClassName=function(){return n.getPropAsString("oddRowClassName")},n.showMore=function(){n.setState(Object(V.a)(n.state,(function(e){n.state.visibleItems<n.props.data.length&&(e.visibleItems+=50)})))},n.state={sortBy:null,sortDirection:"asc",visibleItems:100},n}return Object(i.a)(a,[{key:"componentDidUpdate",value:function(e){e.data!==this.props.data&&this.setState({visibleItems:100})}},{key:"render",value:function(){var e=this,t=performance.now(),a=Object(G.a)(this.props.data);if(this.state.sortBy){var n,o=this.getComparator(this.state.sortBy);n="desc"===this.state.sortDirection?function(e,t){return-o(e,t)}:o,a.sort(n)}var c=performance.now();return console.log("Sorting took "+(c-t)+" milliseconds."),a=a.slice(0,this.state.visibleItems),r.a.createElement(r.a.Fragment,null,r.a.createElement("table",{className:this.props.className},r.a.createElement("thead",{className:"bg-white"},r.a.createElement("tr",null,this.props.header.map((function(t){var a=null;return e.state.sortBy===t.name&&(a=e.state.sortDirection),r.a.createElement(K,{key:t.name,header:t.name,sortable:t.sortable,onClick:function(){return e.handleHeaderClick(t.name)},sortDirection:a})})))),r.a.createElement("tbody",null,a.map((function(t,a){var n=e.rowClassName();return n+=a%2===0?" "+e.evenRowClassName():" "+e.oddRowClassName(),r.a.createElement(Y,{className:n,key:e.props.keyFun(t),expandableContent:e.props.expandableContent(t)},e.props.header.map((function(e){return r.a.createElement("td",{key:e.name,className:e.className},e.displayGetter(t))})))})))),this.state.visibleItems<this.props.data.length?r.a.createElement("p",{className:"w-full text-center m-4"},"Loading more components..."):r.a.createElement(r.a.Fragment,null),r.a.createElement($.a,{key:"tableEnd",onEnter:this.showMore}))}}]),a}(r.a.Component),Y=function(e){Object(u.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).handleClick=function(e){e.preventDefault(),n.setState(Object(V.a)(n.state,(function(e){e.expanded=!e.expanded})))},n.state={expanded:!1},n}return Object(i.a)(a,[{key:"render",value:function(){var e=r.a.createElement(r.a.Fragment,null),t=this.props.className?this.props.className:"";return this.state.expanded&&this.props.expandableContent&&(e=r.a.createElement("tr",null,r.a.createElement("td",{colSpan:this.props.children.length},this.props.expandableContent))),this.props.expandableContent&&(t+=" cursor-pointer"),r.a.createElement(r.a.Fragment,null,r.a.createElement("tr",{className:t,onClick:this.handleClick},this.props.children),e)}}]),a}(r.a.Component);function Z(e){var t=[];for(var a in e)if("sort"!==a){var n=a.split("x").map((function(e){return parseInt(e)})),r=n[0]*n[1];t.push([r,e[a]])}return t.sort((function(e,t){return t-e})),t}function _(e,t){var a,n=Object(W.a)(t);try{for(n.s();!(a=n.n()).done;){var r=a.value;if(e>=r.qFrom&&(e<=r.qTo||!r.qTo))return r.price}}catch(o){n.e(o)}finally{n.f()}if(t[0])return t[0].price}function ee(e,t){var a,n=function(e){return(e.lcsc+" "+e.mfr+" "+e.description).toLocaleLowerCase()}(e),r=Object(W.a)(t);try{for(r.s();!(a=r.n()).done;){var o=a.value;if(!n.includes(o))return!1}}catch(c){r.e(c)}finally{r.f()}return!0}function te(){return r.a.createElement("div",{className:"w-full text-center"},r.a.createElement("svg",{className:"animate-spin -ml-1 m-8 h-5 w-5 text-black mx-auto inline-block",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",style:{maxWidth:"100px",maxHeight:"100px",width:"100%",height:"100%"}},r.a.createElement("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),r.a.createElement("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})))}Object(V.b)();var ae=function(e){Object(u.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).assignRef=function(e){n.container=e},n.handleMouseEnter=function(){n.setState({hover:!0})},n.handleMouseLeave=function(){n.setState({hover:!1})},n.state={hover:!1},n}return Object(i.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave},r.a.createElement(J.LazyLoadImage,{height:this.props.width,width:this.props.height,src:this.props.src}),this.state.hover?r.a.createElement("div",{className:"z-40 absolute bg-white border-solid border-gray-600 border-2"},r.a.createElement(J.LazyLoadImage,{height:this.props.zoomWidth,width:this.props.zoomHeight,src:this.props.zoomSrc})):r.a.createElement(r.a.Fragment,null))}}]),a}(r.a.Component),ne=function(e){Object(u.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).handleStartComponentsChange=function(){var e=n.state.componentsVersion+1;return n.setState(Object(V.c)(n.state,(function(t){t.expectedComponentsVersion=e}))),e},n.handleComponentsChange=function(e,t){e===n.state.expectedComponentsVersion&&n.setState(Object(V.c)(n.state,(function(a){a.componentsVersion=e,a.components=t;var r,o=performance.now(),c={},s=Object(W.a)(n.collectProperties(t));try{for(s.s();!(r=s.n()).done;){var l=r.value;c[l.property]=l.values.map((function(e){return e.key}))}}catch(h){s.e(h)}finally{s.f()}for(var i=0,u=Object.keys(a.activeProperties);i<u.length;i++){var p=u[i];p in c||delete a.activeProperties[p]}for(var m in c)a.activeProperties[m]=c[m];var f=performance.now();console.log("Active categories took ",f-o,"ms")})))},n.handleActivePropertiesChange=function(e,t){n.setState(Object(V.c)(n.state,(function(a){a.activeProperties[e]=t})))},n.handleIncludeInTable=function(e,t){n.setState(Object(V.c)(n.state,(function(a){t?a.tableIncludedProperties.add(e):a.tableIncludedProperties.delete(e)})))},n.handlePropertyRequired=function(e,t){n.setState(Object(V.c)(n.state,(function(a){t?a.requiredProperties.add(e):a.requiredProperties.delete(e)})))},n.handleQuantityChange=function(e){n.setState({quantity:e})},n.state={components:[],categories:[],activeProperties:{},requiredProperties:new Set,expectedComponentsVersion:0,componentsVersion:0,tableIncludedProperties:new Set,quantity:1},n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=this;w.categories.toArray().then((function(t){e.setState({categories:e.prepareCategories(t)})}))}},{key:"prepareCategories",value:function(e){var t,a={},n=Object(W.a)(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;void 0===a[r.category]&&(a[r.category]=[]),a[r.category].push({value:r.subcategory,key:r.id})}}catch(l){n.e(l)}finally{n.f()}var o=[];for(var c in a){var s=a[c];s.sort((function(e,t){return e.value.localeCompare(t.value)})),o.push({category:c,subcategories:s})}return o.sort((function(e,t){return e.category.localeCompare(t.category)})),o}},{key:"collectProperties",value:function(e){var t,a={},n=Object(W.a)(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;if("attributes"in r){var o=r.attributes;for(var c in o)c in a||(a[c]=new Set),a[c].add(o[c])}}}catch(u){n.e(u)}finally{n.f()}var s=[];for(var l in a)if(!(a[l].size<=1)){var i=Object(G.a)(a[l]).map((function(e){return{key:e,value:e}}));i.sort((function(e,t){return e.key.localeCompare(t.key)})),s.push({property:l,values:i})}return s.sort((function(e,t){return e.property.localeCompare(t.property)})),s}},{key:"filterComponents",value:function(e,t,a){return e.filter((function(e){for(var n in t){var r=e.attributes;if(n in r){if(!t[n].includes(r[n]))return!1}else if(a.has(n))return!1}return!0}))}},{key:"render",value:function(){var e=this,t=r.a.createElement(r.a.Fragment,null,r.a.createElement(oe,{categories:this.state.categories,onChange:this.handleComponentsChange,onAnnounceChange:this.handleStartComponentsChange}),r.a.createElement(se,{properties:this.collectProperties(this.state.components),values:this.state.activeProperties,onChange:this.handleActivePropertiesChange,onTableInclude:this.handleIncludeInTable,tableIncluded:Array.from(this.state.tableIncludedProperties),requiredProperties:Array.from(this.state.requiredProperties),onPropertyRequired:this.handlePropertyRequired}),r.a.createElement(le,{onChange:this.handleQuantityChange,value:this.state.quantity}));if(this.state.expectedComponentsVersion!==this.state.componentsVersion)return r.a.createElement(r.a.Fragment,null,t,r.a.createElement(te,null));var a,n=[{name:"MFR (click for datasheet)",sortable:!0,displayGetter:function(e){return r.a.createElement("a",{href:e.datasheet},r.a.createElement(H.a,{icon:"file-pdf"})," ",e.mfr)},comparator:function(e,t){return e.mfr.localeCompare(t.mfr)},className:"px-1 whitespace-no-wrap"},{name:"LCSC",sortable:!0,className:"px-1 whitespace-no-wrap text-center",displayGetter:function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement("a",{href:e.url,className:"underline text-blue-600"},e.lcsc),r.a.createElement(Q.CopyToClipboard,{text:e.lcsc},r.a.createElement("button",{className:"py-2 px-4",onClick:function(e){return e.stopPropagation()}},r.a.createElement(H.a,{icon:"clipboard"}))))},comparator:function(e,t){return e.lcsc.localeCompare(t.lcsc)}},{name:"Basic/Extended",sortable:!0,displayGetter:function(e){return e.attributes["Basic/Extended"][0]},comparator:function(e,t){return e.attributes["Basic/Extended"].localeCompare(t.attributes["Basic/Extended"])},className:"text-center"},{name:"Image",sortable:!1,displayGetter:function(e){var t="./brokenimage.svg",a="./brokenimage.svg";if(e.images&&Object.keys(e.images).length>0){var n=Z(e.images);t=n[0][1],a=n[2][1]}return r.a.createElement(ae,{height:90,width:90,src:t,zoomWidth:350,zoomHeight:350,zoomSrc:a})}},{name:"Description",sortable:!0,displayGetter:function(e){return e.description},comparator:function(e,t){return e.description.localeCompare(t.description)}},{name:"Manufacturer",sortable:!0,displayGetter:function(e){return e.manufacturer},comparator:function(e,t){return e.manufacturer.localeCompare(t.manufacturer)}},{name:"Stock",sortable:!0,displayGetter:function(e){return e.stock},comparator:function(e,t){return e.stock-t.stock}},{name:"Price",sortable:!0,displayGetter:function(t){var a=_(e.state.quantity,t.price),n=Math.round(1e3*(a+Number.EPSILON))/1e3,o=Math.round(1e3*(a*e.state.quantity+Number.EPSILON))/1e3;return r.a.createElement(r.a.Fragment,null,"".concat(n,"$/unit"),r.a.createElement("br",null),"".concat(o,"$/").concat(e.state.quantity," units"))},comparator:function(t,a){return _(e.state.quantity,t.price)-_(e.state.quantity,a.price)}}],o=Object(W.a)(this.state.tableIncludedProperties);try{var c=function(){var e=a.value,t=function(t){return e in t.attributes?t.attributes[e]:""};n.push({name:e,sortable:!0,displayGetter:t,comparator:function(e,a){return function(e,t){return"number"===typeof e&&"number"===typeof t?e-t:"string"===typeof e&&"string"===typeof t?e.localeCompare(t):e.toString().localeCompare(t.toString())}(t(e),t(a))}})};for(o.s();!(a=o.n()).done;)c()}catch(u){o.e(u)}finally{o.f()}var s=performance.now(),l=this.filterComponents(this.state.components,this.state.activeProperties,this.state.requiredProperties),i=performance.now();return console.log("Filtering took ",i-s," ms"),r.a.createElement(r.a.Fragment,null,t,l.length?r.a.createElement("div",{className:"pt-4"},r.a.createElement("p",{className:"w-full p-2"},"Components matching query: ",l.length),r.a.createElement(X,{className:"w-full",headerClassName:"bg-blue-500",header:n,data:l,evenRowClassName:"bg-gray-100",oddRowClassName:"bg-gray-300",keyFun:function(e){return e.lcsc},expandableContent:function(e){return r.a.createElement(re,{component:e})}})):r.a.createElement("div",{className:"p-8 text-center text-lg"},"No components match the selected criteria."))}}]),a}(r.a.Component);function re(e){var t=e.component,a="./brokenimage.svg";if(t.images&&Object.keys(t.images).length>0){var n=Z(t.images);a=n[n.length-1][1]}return r.a.createElement("div",{className:"w-full flex flex-wrap pl-6"},r.a.createElement("div",{className:"w-full md:w-1/5 p-3"},r.a.createElement("img",{src:a,alt:"Component ".concat(t.lcsc),className:"w-full mx-auto",style:{maxWidth:"250px"}})),r.a.createElement("div",{className:"w-full md:w-2/5 p-3"},r.a.createElement("table",{className:"w-full"},r.a.createElement("thead",{className:"border-b-2 font-bold"},r.a.createElement("tr",null,r.a.createElement("td",null,"Property"),r.a.createElement("td",null,"Value"))),r.a.createElement("tbody",null,Object.keys(t.attributes).reduce((function(e,a){return e.push(r.a.createElement("tr",{key:a},r.a.createElement("td",null,a),r.a.createElement("td",null,t.attributes[a]))),e}),[])))),r.a.createElement("div",{className:"w-full md:w-2/5 p-3"},r.a.createElement("table",{className:"w-full"},r.a.createElement("thead",{className:"border-b-2 font-bold"},r.a.createElement("tr",null,r.a.createElement("td",null,"Quantity"),r.a.createElement("td",null,"Unit Price"))),r.a.createElement("tbody",null,t.price.map((function(e,t){return r.a.createElement("tr",{key:t},r.a.createElement("td",null,e.qTo?"".concat(e.qFrom,"-").concat(e.qTo):"".concat(e.qFrom,"+")),r.a.createElement("td",null,e.price," USD"))}))))))}var oe=function(e){Object(u.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).collectActiveCategories=function(){var e=[];for(var t in n.state.categories)e=e.concat(n.state.categories[t]);return e},n.notifyParent=function(){var e=performance.now(),t=n.props.onAnnounceChange();n.components().then((function(a){var r=performance.now();console.log("Select took",r-e,"ms"),n.props.onChange(t,a)}))},n.handleCategoryChange=function(e,t){console.log("Category change"),n.setState(Object(V.c)(n.state,(function(a){a.categories[e]=t.map((function(e){return parseInt(e)})),a.allCategories=!1})),n.notifyParent)},n.selectAll=function(e){var t,a=Object(W.a)(n.props.categories);try{for(a.s();!(t=a.n()).done;){var r=t.value;e.categories[r.category]=r.subcategories.map((function(e){return e.key}))}}catch(o){a.e(o)}finally{a.f()}e.allCategories=!0},n.handleSelectAll=function(){n.setState(Object(V.c)(n.state,n.selectAll),n.notifyParent)},n.handleSelectNone=function(){n.setState(Object(V.c)(n.state,(function(e){for(var t in e.categories)e.categories[t]=[];e.allCategories=!1})),n.notifyParent)},n.handleFulltextChange=function(e){n.setState(Object(V.c)(n.state,(function(t){t.searchString=e.target.value,t.allCategories||0!==n.collectActiveCategories().length||n.selectAll(t)})),(function(){clearTimeout(n.searchTimeout),n.searchTimeout=setTimeout(n.notifyParent(),3e3)}))},n.state={categories:{},allCategories:!1,searchString:""},n}return Object(i.a)(a,[{key:"components",value:function(){var e=Object(x.a)(g.a.mark((function e(){var t,a,n,r,o,c;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.state.allCategories?w.components:w.components.where("category").anyOf(this.collectActiveCategories()),e.next=3,t.toArray();case 3:if(a=e.sent,0!==this.state.searchString.length){e.next=6;break}return e.abrupt("return",a);case 6:if(0!==(n=this.state.searchString.split(/\s+/).filter((function(e){return e.length>0})).map((function(e){return e.toLocaleLowerCase()}))).length){e.next=9;break}return e.abrupt("return",a);case 9:return console.log("Starting search..."),r=performance.now(),o=a.filter((function(e){return ee(e,n)})),c=performance.now(),console.log("Search took",c-r,"ms"),e.abrupt("return",o);case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"w-full p-2 border-b-2 border-gray-600 bg-gray-200"},r.a.createElement("div",{className:"flex"},r.a.createElement("h3",{className:"block flex-1 text-lg mx-2 font-bold"},"Select category"),r.a.createElement("button",{className:"block flex-none mx-2 bg-blue-500 hover:bg-blue-700 text-black py-1 px-2 rounded",onClick:this.handleSelectAll},"Select all categories"),r.a.createElement("button",{className:"block flex-none mx-2 bg-blue-500 hover:bg-blue-700 text-black py-1 px-2 rounded",onClick:this.handleSelectNone},"Select none")),r.a.createElement("div",{className:"w-full flex p-2"},r.a.createElement("label",{className:"flex-none block py-1 mr-2"},"Contains text:"),r.a.createElement("input",{type:"text",className:"block flex-1 bg-white appearance-none border-2 border-gray-500 rounded w-full py-1 px-4 text-gray-700 leading-tight focus:outline-none focus:bg-white focus:border-blue-500",onChange:this.handleFulltextChange})),r.a.createElement("div",{className:"flex flex-wrap items-stretch"},this.props.categories.map((function(t){return r.a.createElement(ce,{className:"bg-blue-500",key:t.category,name:t.category,options:t.subcategories,value:e.state.categories[t.category],onChange:function(a){e.handleCategoryChange(t.category,a)}})}))))}}]),a}(r.a.Component),ce=function(e){Object(u.a)(a,e);var t=Object(p.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).handleAllClick=function(t){t.preventDefault();var a=e.props.options.map((function(e){return e.key}));e.props.onChange(a)},e.handleNoneClick=function(t){t.preventDefault(),e.props.onChange([])},e.handleSelectChange=function(t){t.preventDefault();var a=Array.from(t.target.selectedOptions,(function(e){return e.value}));e.props.onChange(a)},e}return Object(i.a)(a,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"rounded flex flex-col flex-1 p-1 m-1 ".concat(this.props.className),style:{minWidth:"200px",maxWidth:"400px"}},r.a.createElement("div",{className:"flex-none flex w-full"},r.a.createElement("h5",{className:"block flex-1 font-bold cursor-default rounded px-1 truncate hover:whitespace-normal"},this.props.name),r.a.createElement("div",{className:"flex-none"},r.a.createElement("button",{onClick:this.handleAllClick,className:"mx-2"},"All"),r.a.createElement("button",{onClick:this.handleNoneClick,className:"mx-2"},"None"))),r.a.createElement("select",{multiple:"multiple",className:"flex-1 w-full my-2 p-1",value:this.props.value,onChange:this.handleSelectChange},this.props.options.map((function(e){return r.a.createElement("option",{value:e.key,key:e.key},e.value)}))),r.a.createElement("div",{className:"flex-none"},this.props.children)))}}]),a}(r.a.Component),se=function(e){Object(u.a)(a,e);var t=Object(p.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"w-full p-2 border-b-2 border-gray-600 bg-gray-200"},r.a.createElement("h3",{className:"block w-full text-lg mx-2 font-bold"},"Property filter"),r.a.createElement("div",{className:"flex flex-wrap items-stretch"},0===this.props.properties.length?r.a.createElement("p",{className:"mx-2"},"There are no properties to select from. Select category or adjust the full-text search to include some components."):this.props.properties.map((function(t){return r.a.createElement(ce,{className:"bg-blue-500",key:t.property,name:t.property,options:t.values,value:e.props.values[t.property],onChange:function(a){e.props.onChange(t.property,a)}},r.a.createElement("div",{className:"w-full"},r.a.createElement("input",{className:"mr-2 leading-tight",type:"checkbox",checked:e.props.tableIncluded.includes(t.property),onChange:function(a){e.props.onTableInclude(t.property,a.target.checked)}}),"Table column"),r.a.createElement("div",{className:"w-full"},r.a.createElement("input",{className:"mr-2 leading-tight",type:"checkbox",checked:e.props.requiredProperties.includes(t.property),onChange:function(a){e.props.onPropertyRequired(t.property,a.target.checked)}}),"Required"))}))))}}]),a}(r.a.Component),le=function(e){Object(u.a)(a,e);var t=Object(p.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"w-full p-2 border-b-2 border-gray-600 bg-gray-200"},r.a.createElement("div",{className:"flex"},r.a.createElement("div",{className:"flex-none py-2 mr-2"},"Specify quantity (for price point selection)"),r.a.createElement("input",{className:"block flex-1 bg-white appearance-none border-2 border-gray-500 rounded w-full py-1 px-4 text-gray-700 leading-tight focus:outline-none focus:bg-white focus:border-blue-500",type:"number",min:1,onChange:function(t){return e.props.onChange(t.target.value)},value:this.props.value})))}}]),a}(r.a.Component);function ie(e){return r.a.createElement("div",{className:"w-full px-2 py-8 flex"},r.a.createElement("img",{src:"./favicon.svg",alt:"",className:"block flex-none mr-4 h-auto"}),r.a.createElement("div",{className:"flex-1"},r.a.createElement("h1",{className:"text-4xl font-bold"},"JLC PCB SMD Assembly Component Catalogue"),r.a.createElement("p",null,"Parametric search for components offered by ",r.a.createElement("a",{href:"https://jlcpcb.com"},"JLC PCB")," SMD assembly service."),r.a.createElement("p",null,"Read more at project's ",r.a.createElement("a",{className:"underline text-blue-500 hover:text-blue-800",href:"https://github.com/yaqwsx/jlcparts"},"GitHub page"),".")))}function ue(e){return r.a.createElement("div",{className:"w-full p-2 border-t-2 border-gray-800",style:{minHeight:"200px"}})}m.b.add(f.a,h.a,d.a);var pe=function(e){Object(u.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={componentCount:void 0},n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=this;w.components.count().then((function(t){e.setState({componentCount:t})}))}},{key:"render",value:function(){return void 0===this.state.componentCount||0!==this.state.componentCount?r.a.createElement(r.a.Fragment,null):r.a.createElement("div",{className:"w-full p-8 my-2 bg-yellow-400 rounded"},r.a.createElement("p",null,'Hey, it seems that you run the application for the first time, hence, there\'s no component library in your device. Just press the "Update the component library button" in the upper right corner to download it and use the app.'),r.a.createElement("p",null,"Note that the initial download of the component library might take a while."))}}]),a}(r.a.Component),me=function(e){Object(u.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).handleUpdateClick=function(e){e.preventDefault(),n.props.onTriggerUpdate()},n.state={updateAvailable:n.props.updateAvailable},n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=function(){(function(){return O.apply(this,arguments)})().then((function(t){e.setState({updateAvailable:t})})),w.settings.get("lastUpdate").then((function(t){e.setState({lastUpdate:t})}))};t(),this.timerID=setInterval(t,6e4)}},{key:"componentWillUnmount",value:function(){clearInterval(this.timerID)}},{key:"render",value:function(){return this.state.updateAvailable?r.a.createElement("div",{className:"flex flex-wrap w-full align-middle bg-yellow-400 p-2"},r.a.createElement("p",{className:"inline-block w-full md:w-1/2 py-2"},"There is an update of the component library available."),r.a.createElement("button",{className:"inline-block w-full md:w-1/2 bg-green-500 hover:bg-green-600 py-2 px-4 rounded",onClick:this.handleUpdateClick},"Update the component library")):r.a.createElement("div",{className:"w-full bg-green-400 p-2 text-xs"},r.a.createElement("p",null,"The component database is up to-date ",this.state.lastUpdate?"(".concat(this.state.lastUpdate,")"):"","."))}}]),a}(r.a.Component),fe=function(e){Object(u.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={progress:{}},n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=performance.now();(function(e){return j.apply(this,arguments)})((function(t){e.setState({progress:t})})).then((function(){var a=performance.now();console.log("Library update took ",a-t,"ms"),e.props.onFinish()}))}},{key:"listItems",value:function(){for(var e=[],t=0,a=Object.entries(this.state.progress);t<a.length;t++){var n=Object(s.a)(a[t],2),o=n[0],c=n[1],l=c[1]?"bg-green-500":"bg-yellow-400";e.push(r.a.createElement("tr",{key:o},r.a.createElement("td",{className:"p-2"},o),r.a.createElement("td",{className:"p-2 ".concat(l)},c[0])))}return e}},{key:"render",value:function(){return r.a.createElement("div",{className:"w-full px-2 py-8"},r.a.createElement("h1",{className:"font-bold text-2xl"},"Update progress:"),r.a.createElement("table",{className:"w-full"},r.a.createElement("thead",null,r.a.createElement("tr",{className:"border-b-2 border-gray-800 font-bold"},r.a.createElement("td",null,"Operation/category"),r.a.createElement("td",null,"Progress"))),r.a.createElement("tbody",null,this.listItems())))}}]),a}(r.a.Component);function he(e){return r.a.createElement("div",{className:"container mx-auto px-2"},e.children)}var de=function(e){Object(u.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).onUpdateFinish=function(){n.setState({updating:!1})},n.triggerUpdate=function(){n.setState({updating:!0})},n.state={updating:!1},n}return Object(i.a)(a,[{key:"render",value:function(){return this.state.updating?r.a.createElement(he,null,r.a.createElement(fe,{onFinish:this.onUpdateFinish})):r.a.createElement(he,null,r.a.createElement(me,{onTriggerUpdate:this.triggerUpdate}),r.a.createElement(ie,null),r.a.createElement(pe,null),r.a.createElement(ne,null),r.a.createElement(ue,null))}}]),a}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(de,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[30,1,2]]]);
//# sourceMappingURL=main.872e3af9.chunk.js.map